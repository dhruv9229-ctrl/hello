<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Happy Raksha Bandhan Celebration</title>
  <style>
    html, body {
      margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden;
    }
    body {
      background: #fff;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      height: 100vh;
      width: 100vw;
      min-height: 100vh;
      min-width: 100vw;
    }
    /* Prompt styling */
    #click-prompt {
      position: absolute;
      top: 16%;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.92);
      color: #b16b1a;
      font-size: 1.5em;
      font-weight: bold;
      border-radius: 16px;
      padding: 0.6em 1.4em;
      box-shadow: 0 2px 20px #ffe0e088;
      pointer-events: none;
      z-index: 5;
      animation: bounce 1.3s cubic-bezier(.57,.02,.56,.8) infinite alternate;
      letter-spacing: 1px;
    }
	/* Popup Overlay */
#popup-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 105;  /* on top of celebration */
  visibility: hidden;
  opacity: 0;
  transition: opacity 0.3s ease;
}

/* Show popup */
#popup-overlay.active {
  visibility: visible;
  opacity: 1;
}

#popup-content {
  background: #fff;
  border-radius: 16px;
  padding: 20px 24px;
  box-shadow: 0 12px 36px rgba(0,0,0,0.3);
  max-width: 90vw;
  max-height: 90vh;
  overflow: auto;
  text-align: center;
  position: relative;
}

#popup-content img {
  max-width: 100%;
  max-height: 60vh;
  border-radius: 12px;
  margin-top: 16px;
}

#popup-close {
  position: absolute;
  top: 12px;
  right: 16px;
  font-size: 28px;
  background: none;
  border: none;
  color: #b16b1a;
  cursor: pointer;
  font-weight: bold;
  line-height: 1;
}
#popup-close:hover,
#popup-close:focus {
  color: #7a4610;
  outline: none;
}

    @keyframes bounce {
      from { transform: translate(-50%, 0px) scale(1);}
      50%  { transform: translate(-50%, -8px) scale(1.09);}
      to   { transform: translate(-50%, 0px) scale(1.02);}
    }
    /* Image styling */
    #white-bg-image {
      display: block;
      width: 240px;
      height: 240px;
      object-fit: contain;
      background: #fff;
      border-radius: 24px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.12);
      cursor: pointer;
      transition: transform 0.2s;
      z-index: 1;
      position: relative;
    }
    #white-bg-image:hover, #white-bg-image:active {
      transform: scale(1.03) rotate(-1.6deg);
      box-shadow: 0 16px 48px rgba(0,0,0,0.18);
    }
    /* Celebration section */
    #raksha-message {
      display: none;
      position: fixed;
      inset: 0;
      background: linear-gradient(120deg, #fffbe6 70%, #ffdad7 100%);
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10;
      width: 100vw;
      height: 100vh;
      text-align: center;
      overflow: hidden;
    }
    #raksha-message h1 {
      font-size: 2.85em;
      color: #b16b1a;
      margin-bottom: 8px;
      text-shadow: 1px 1px 16px #ffd9a5a8;
      letter-spacing: 2px;
    }
    #raksha-message p {
      font-size: 1.5em;
      color: #ae2d34;
      margin-top: 0;
      font-weight: 500;
    }
    /* Confetti and fireworks canvases */
    #confetti-canvas, #fireworks-canvas {
      position: fixed;
      pointer-events: none;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 99;
    }
    #fireworks-canvas { z-index: 100; }
    /* Balloons */
    #balloon-wrapper {
      position: fixed;
      pointer-events: none;
      top:0; left:0;
      width:100vw; height:100vh;
      z-index: 102;
    }
    .balloon {
      position: absolute;
      width: 48px; height: 65px;
      background: radial-gradient(ellipse at center, #ffe0e0 45%, #f6d365 100%);
      border-radius:50% 50% 50% 50% / 60% 65% 40% 40%;
      border:2px solid #ffb884;
      box-shadow: 0 1px 12px #f8bbd0aa;
      opacity: .85;
      animation: floatUp 6.5s linear forwards;
    }
    @keyframes floatUp {
      from { transform: translateY(80vh) scale(.84) rotate(-5deg); }
      to { transform: translateY(-100vh) scale(1.05) rotate(5deg);}
    }
  </style>
</head>
<body>
  <!-- Bouncing animated prompt -->
  <div id="click-prompt">‡§®‡•Ä‡§ö‡•á ‡§∏‡•ç‡§™‡§∞‡•ç‡§∂ ‡§ï‡§∞‡•á‡§Çüëáüèª!</div>

  <!-- Landing image -->.
  <img id="white-bg-image" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRfn5FHQ0UDXOJupqoeNYD5FPjey4PIn9DWyA&s" alt="Click me!" />

  <!-- Celebration section & elements -->
  <div id="raksha-message">
    <h1>Happy Raksha Bandhan!</h1>
    <p>Wishing you lots of love & joy on this special day üíõüåπ</p>
	<img id="white-bg-image" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSexUY7c0wBLsHdMoo0HHp3jfflQeUH-sweqw&s" />
    <audio id="celebration-audio" src="love.mp3" preload="auto" loop></audio>
    <div id="balloon-wrapper"></div>
  </div>
  <div id="popup-overlay" role="dialog" aria-modal="true" aria-labelledby="popup-title">
  <div id="popup-content">
    <button id="popup-close" aria-label="Close popup">&times;</button>
    <h2 id="popup-title" style="margin-top:0; color:#b16b1a;">‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§â‡§™‡§π‡§æ‡§∞! üåπ</h2>
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSWzjDJzn_2_oxgwa0qta8INwu8o_neZQrOcA&s.jpg" alt="Raksha Bandhan Gift Image" />
  </div>
</div>

  <canvas id="confetti-canvas"></canvas>
  <canvas id="fireworks-canvas"></canvas>

  <script>
    // ================ Celebration Animations ================
    let confettiAnimationId = null,
        fireworksAnimationId = null,
        balloonsIntervalId = null,
        confetti = [], confettiCtx, confettiCanvas,
        fireworks = [], fireworksCtx, fireworksCanvas, fireworksFrameCount = 0, balloonWrapper;

    // Confetti
    function initConfetti() {
      confettiCanvas = document.getElementById('confetti-canvas');
      confettiCanvas.width = window.innerWidth;
      confettiCanvas.height = window.innerHeight;
      confettiCtx = confettiCanvas.getContext('2d');
      confetti.length = 0;
      const colors = ['#f8bbd0', '#b16b1a', '#f6d365', '#ffd3a5', '#80deea', '#b2ff59'];
      for (let i=0; i<180; i++) {
        confetti.push({
          x: Math.random() * confettiCanvas.width,
          y: Math.random() * confettiCanvas.height,
          r: Math.random() * 7 + 4,
          d: Math.random() * 80 + 40,
          color: colors[Math.floor(Math.random() * colors.length)],
          tilt: Math.random() * 10 - 5
        });
      }
    }
    function drawConfetti() {
      confettiCtx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
      confetti.forEach(p=>{
        confettiCtx.beginPath();
        confettiCtx.ellipse(p.x, p.y, p.r, p.r*0.7, p.tilt, 0, 2 * Math.PI);
        confettiCtx.fillStyle = p.color;
        confettiCtx.fill();
      });
      confetti.forEach(p=>{
        p.y += Math.cos(p.d) + 1 + p.r/2;
        p.x += Math.sin(p.tilt);
        p.tilt += 0.06 * (Math.random()-0.5);
        if(p.y > confettiCanvas.height){
          p.y = -10;
          p.x = Math.random()*confettiCanvas.width;
        }
      });
      confettiAnimationId = requestAnimationFrame(drawConfetti);
    }
    function stopConfetti() {
      if(confettiAnimationId) cancelAnimationFrame(confettiAnimationId);
      confettiAnimationId = null;
      if(confettiCtx && confettiCanvas) confettiCtx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
    }

    // Fireworks
    function initFireworks() {
      fireworksCanvas = document.getElementById('fireworks-canvas');
      fireworksCanvas.width = window.innerWidth;
      fireworksCanvas.height = window.innerHeight;
      fireworksCtx = fireworksCanvas.getContext('2d');
      fireworks.length = 0;
      fireworksFrameCount = 0;
    }
    function randomColor() {
      const colors = ['#f6d365','#ffd3a5','#b16b1a','#f8bbd0','#ae2d34','#80deea','#b2ff59'];
      return colors[Math.floor(Math.random() * colors.length)];
    }
    function createFirework() {
      const x = Math.random() * fireworksCanvas.width;
      const y = Math.random() * fireworksCanvas.height * 0.5;
      for(let i=0; i<36; i++){
        const angle = (Math.PI * 2 * i) / 36;
        const vx = Math.cos(angle) * (Math.random() * 3 + 2);
        const vy = Math.sin(angle) * (Math.random() * 3 + 2);
        fireworks.push({
          x: x, y: y,
          vx: vx, vy: vy,
          alpha: 1,
          color: randomColor()
        });
      }
    }
    function drawFireworks() {
      fireworksCtx.clearRect(0,0, fireworksCanvas.width, fireworksCanvas.height);
      fireworks.forEach(f=>{
        fireworksCtx.globalAlpha = f.alpha;
        fireworksCtx.beginPath();
        fireworksCtx.arc(f.x, f.y, 4, 0, 2 * Math.PI);
        fireworksCtx.fillStyle = f.color;
        fireworksCtx.fill();
      });
      fireworksCtx.globalAlpha = 1;
      fireworks.forEach(f=>{
        f.x += f.vx;
        f.y += f.vy;
        f.alpha *= 0.97;
        f.vy += 0.03;
      });
      fireworks = fireworks.filter(f=>f.alpha > 0.05);
      fireworksFrameCount++;
      if(fireworksFrameCount % 40 === 0) createFirework();
      fireworksAnimationId = requestAnimationFrame(drawFireworks);
    }
    function stopFireworks() {
      if(fireworksAnimationId) cancelAnimationFrame(fireworksAnimationId);
      fireworksAnimationId = null;
      if(fireworksCtx && fireworksCanvas) fireworksCtx.clearRect(0,0, fireworksCanvas.width, fireworksCanvas.height);
    }

    // Balloons
    const balloonColors = ['#ffe0e0','#f6d365','#b2ff59','#b16b1a','#ffd3a5','#f8bbd0'];
    function startBalloons() {
      balloonWrapper = document.getElementById('balloon-wrapper');
      balloonsIntervalId = setInterval(() => {
        const el = document.createElement('div');
        el.className = 'balloon';
        el.style.left = `${Math.random() * 95}vw`;
        el.style.background = `radial-gradient(ellipse at center, ${balloonColors[Math.floor(Math.random() * balloonColors.length)]} 45%, #fff 100%)`;
        balloonWrapper.appendChild(el);
        setTimeout(() => { balloonWrapper.contains(el) && balloonWrapper.removeChild(el); }, 6500);
      }, 700);
    }
    function stopBalloons() {
      if(balloonsIntervalId) clearInterval(balloonsIntervalId);
      balloonsIntervalId = null;
      if(balloonWrapper) balloonWrapper.innerHTML = '';
    }

    // =================== Main Logic and User Prompt ===================
    document.addEventListener("DOMContentLoaded", () => {
      const whiteImage = document.getElementById('white-bg-image');
      const clickPrompt = document.getElementById('click-prompt');
      const messagePage = document.getElementById('raksha-message');
      const audio = document.getElementById('celebration-audio');

      whiteImage.style.display = 'block';
      messagePage.style.display = 'none';

      whiteImage.addEventListener('click', () => {
        if(clickPrompt) clickPrompt.style.display = 'none';
        whiteImage.style.display = 'none';
        messagePage.style.display = 'flex';
        audio.loop = true;
        audio.play();
        // Start celebration effects
        initConfetti(); drawConfetti();
        initFireworks(); drawFireworks();
        startBalloons();
      });

      // Stop everything when user navigates away
      function stopAll() {
        stopConfetti(); stopFireworks(); stopBalloons();
        audio.pause(); audio.currentTime = 0;
      }
      document.addEventListener('visibilitychange', () => {
        if (document.hidden) {
          stopAll();
        } else if (messagePage.style.display === 'flex') {
          audio.play();
          initConfetti(); drawConfetti();
          initFireworks(); drawFireworks();
          startBalloons();
        }
      });
      window.addEventListener('pagehide', stopAll);
      // Responsive resizing
      window.addEventListener('resize', () => {
        if(messagePage.style.display === 'flex') {
          if(confettiCanvas) {
            confettiCanvas.width = window.innerWidth;
            confettiCanvas.height = window.innerHeight;
          }
          if(fireworksCanvas) {
            fireworksCanvas.width = window.innerWidth;
            fireworksCanvas.height = window.innerHeight;
          }
        }
      });
    });
  document.addEventListener("DOMContentLoaded", () => {
  const popupOverlay = document.getElementById('popup-overlay');
  const popupCloseBtn = document.getElementById('popup-close');
  const messagePage = document.getElementById('raksha-message');

  function openPopup(){
    popupOverlay.classList.add('active');
  }
  function closePopup(){
    popupOverlay.classList.remove('active');
  }

  // Open popup right when celebration page appears (after image click)
  // Assuming the click event logic is already setup:
  const whiteImage = document.getElementById('white-bg-image');
  whiteImage.addEventListener('click', () => {
    // Your existing code to show celebration page, play music, start animations
    // ...

    // Open popup after a slight delay (optional)
    setTimeout(openPopup, 800);  // popup after 0.8 seconds
  });

  // Close popup on button click
  popupCloseBtn.addEventListener('click', closePopup);

  // Optional: close popup when clicking outside the content
  popupOverlay.addEventListener('click', (e) => {
    if(e.target === popupOverlay) {
      closePopup();
    }
  });

  // Optional: close popup on Escape key
  document.addEventListener('keydown', (e) => {
    if(e.key === 'Escape' && popupOverlay.classList.contains('active')) {
      closePopup();
    }
  });
});
document.addEventListener("DOMContentLoaded", () => {
  const popupOverlay = document.getElementById('popup-overlay');
  const popupCloseBtn = document.getElementById('popup-close');
  const messagePage = document.getElementById('raksha-message');

  function openPopup(){
    popupOverlay.classList.add('active');
  }
  function closePopup(){
    popupOverlay.classList.remove('active');
  }

  // Open popup right when celebration page appears (after image click)
  // Assuming the click event logic is already setup:
  const whiteImage = document.getElementById('white-bg-image');
  whiteImage.addEventListener('click', () => {
    // Your existing code to show celebration page, play music, start animations
    // ...

    // Open popup after a slight delay (optional)
    setTimeout(openPopup, 800);  // popup after 0.8 seconds
  });

  // Close popup on button click
  popupCloseBtn.addEventListener('click', closePopup);

  // Optional: close popup when clicking outside the content
  popupOverlay.addEventListener('click', (e) => {
    if(e.target === popupOverlay) {
      closePopup();
    }
  });

  // Optional: close popup on Escape key
  document.addEventListener('keydown', (e) => {
    if(e.key === 'Escape' && popupOverlay.classList.contains('active')) {
      closePopup();
    }
  });
});
</script>
</body>
</html>
